рэббит на тайресе для бонусов
- поднять рэббит на тайресе
- доработать баш скрипт для поднятия rabbit consumers
- настроить очереди
- создать котнроллеры
- создать тестовые контроллеры
- создать тестовые данные для rabbitqMq
- прописать документацию для бонусов

переносим rabbitSh в systemd

***
поднять тестовый минио на компе
*** 
каталог тарйтайрес

-------------------------------------------------------------------
https://help.tyres.spb.ru/issues/80063

- история по бонусам
- очередь на актуальное кол-во бонусов
- бонусы в базе обмена
- запрос как промокод
- условия для брендов

ознакомиться с инфо к задаче
прикинуть структуру сообщений

оценить насколько сложно поднять рэббит со стороны тайрес

-------------------------------------------------------------------
вопрос - в какой момент будет происходить начисление бонусов - когда заказ оплачен

когда заказ оформлен? 
или когда заказ получен?

Необходимо будет набросать документацию по событиям.

1 очередь - начисление бонусов при событии (покупка, услуги и т.д.):

Предполагается 3 пути взаимодействия.
1 - пуш сообщений о событиях в рэббит.
2 - апи для получения полной истории бонусов по клиенту
3 - пуш кол-ва бонусов в exchange новым свойствам к гудам

1:

набросок структуры сообщения в рэббит:

type - тип (заказ или услуга order, service)
idOperation - начисление или списывание
idEvent - id события (заказ, запись на мойку, запись на шиномонтаж)
bonusCount - кол-во бонусов начислено
idOrder - id заказа
idService - id услуги
date - дата события (timestamp или обычная дата)

[{
  "type": "order",
  "body": {
    "idUser": b89ef299-041f-11ec-b3c0-ac1f6b4daebb,
    "idEvent": 3,
    "bonusCount": 300,
    "idOperation": 1,
    "idOrder": 4,
    "idService", Null
    "date": 456456234
  }
}]

2:
Api запрос истории 

запрос:

[{
  "body": {
    "idUser": b89ef299-041f-11ec-b3c0-ac1f6b4daebb,
  }
}]

ответ:

[
  {
    "body": [
      {
        "idEvent": 3,
        "bonusCount": 300,
        "idOperation": 1,
        "idOrder": 4,
        "idService": null,
        "date": 456456234
      },
      {
        "idEvent": 2,
        "bonusCount": 300,
        "idOperation": 1,
        "idOrder": 6,
        "idService": null,
        "date": 456456245
      },
      {
        "idEvent": 3,
        "bonusCount": 300,
        "idOperation": 2,
        "idOrder": 7,
        "idService": null,
        "date": 456456278
      }
    ]
  }
]

3:
бонусы привязываем в exchange в каждогу гуду новым полем.
Мы забираем эти данные и отображаем на сайте.
