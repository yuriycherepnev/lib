1. Если звонок не был отвечен (ни автоответчик, ни оператор) то нет поля answer,
однако тут есть: 1653454376.2320992 ?

2. Если звонок отвечен автоответчиком то в поле dcontext есть ivr-5 либо app-blackhole.

3. Если звонок был не отвечен никем то в cdr в disposition No answer

4. Если звонок отвечен (не важно кем) то в cdr в disposition есть Answered

--------------------------------------------------------------------

В cdr можно попробовать добавить какие нибудь настройки через accountcode ???

Значение параметра acountcode. Можно прописать свой дополнительный код для каждого номера в Applications-> extensions.
Таким образом можно дополнительно что-то обозначить или сгруппировать, если стандартных свойств не хватает.

--------------------------------------------------------------------

! Если звонок был отвечен, то в поле где enenttype = ANSWER в cel cid_name номер отличается от 
src в cdr, иначе номер одинаковый.

app-blackhole ivr-5 - пропущены в нерабочее время

app-announcement-13 - пропущен

app-blackhole - выпадает на самую последнюю запись лога пропущенного звонка в cdr
как и ivr-5

did - явный признак входящего, по отношению к системе, звонка.

sequence - Числовое значение, которое в сочетании с uniqueid и linkedid может использоваться для уникальной идентификации одной записи CDR

--------------------------------------------------------------------

Статусы:

isToInternetShop - сначала берем все dst по времени по linkedid, если
последний hangup, то смотрим канал на котором был звонок.
Если это один из каналов интернет магазина, то звонку присваивается статус
* переведен в интернет магазин

--------------------------------------------------------------------
Is answered

Звонок считается не отвеченным если:
* duration < 10
* did_long = 096362 или did_long = 042359
* group concat отсортированных answered совпадает с одним из значений:

"BUSY,NO ANSWER"
"BUSY,FAILED,NO ANSWER"
"NO ANSWER"
"BUSY,FAILED"
"FAILED,NO ANSWER"
"s"
"hangup"
"FAILED"
"BUSY"

* dcontext = notAnsweredContext (app-announcement-13)

* dst_list равен одному из значений:

"180, 880"
"880"
"504"
"549"

--------------------------------------------------------------------
Disposition:

Если все disposition звонка NO ANSWER - звонок не был отвечен

--------------------------------------------------------------------

dst - вызываемый extension в контексте dcontext на момент завершения звонка.

В логике прохождения звонка Asterisk всё разделяется на контексты (context) и extension в этих контекстах, поэтому каждый вызов в любой момент времени находится в определенном контексте, «вызывая» определенный набор инструкций соответствующего  extension  ( чаще всего это номер ).

В момент завершения звонка asterisk фиксирует последний контекст (dcontext) и вызываемый extension в нем (dst).
В обычном варианте dst — это номер вызываемого. Но может быть номером группы, номером очереди,
служебными и специальными расширениями (s, busy, h, t,i ) , а так же другими — заданными программистом контекста.

Стандартные:
https://asterisk-pbx.ru/wiki/asterisk/cf/standart_extensions

i : Invalid
s : Start - стартовое расширение в контексте. Очень часто используется, просто как символ расширения.
h : Hangup
t : Timeout
T : AbsoluteTimeout
o : Operator
tdial: исходящий (в купе с did дает полную картину о входящих и исходящих)

ivr: interactive voice response 
?
vmblast
recordcheck
fax

--------------------------------------------------------------------

dcontext - контекст в котором вызов был завершен.
dcontext — это контекст назначения вызова, значения по умолчанию нет, поскольку оно уникально для вашего диалплана.

Наиболее часто используются, для FreePBX установки:

from-internal:  контекст в который попадают все звонки инициированные внутренними абонентами системы или самой системой.

ext-group:  контекст групп вызова. Сюда попадают вызовы, которые направляются в группу (applications -> ring groups в GUI)

ext-queues: контекст очередей вызова. Сюда попадают вызовы, которые направляются в очередь (applications -> queues)

--------------------------------------------------------------------
billsec

Фактическое время разговора. Если быть точнее: время от перехода вызывающего канала (channel)  в состояние ANSWERED до закрытия канала.

Так или иначе —  для вызывающего абонента это время которое ему насчитает провайдер связи за разговор.
--------------------------------------------------------------------

Номерной план (диалплан, dialplan):

формальное описание схемы маршрутизации и обработки телефонных звонков.

--------------------------------------------------------------------

dcontext
Контекст в котором вызов был завершен. Наиболее часто используются, для FreePBX установки:

from-internal:  контекст в который попадают все звонки инициированные внутренними абонентами системы или самой системой.

ext-group:  контекст групп вызова. Сюда попадают вызовы, которые направляются в группу (applications -> ring groups в GUI)

ext-queues: контекст очередей вызова. Сюда попадают вызовы, которые направляются в очередь (applications -> queues)



--------------------------------------------------------------------

По хорошему, если bilsec > 0, 

--------------------------------------------------------------------

